<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generador de Firma de Michellen</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #fafaf9;
      min-height: 100vh;
      padding: 2rem 1rem;
    }

    .container {
      max-width: 42rem;
      margin: 0 auto;
      opacity: 0;
      transform: translateY(1rem);
      transition: opacity 0.7s ease, transform 0.7s ease;
    }

    .container.loaded {
      opacity: 1;
      transform: translateY(0);
    }

    .header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .header h1 {
      font-size: 1.5rem;
      font-weight: 600;
      color: #292524;
      margin-bottom: 0.5rem;
    }

    .header p {
      color: #78716c;
    }

    .card {
      background: white;
      border-radius: 1rem;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      border: 1px solid #e7e5e4;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .form-grid {
      display: grid;
      gap: 1rem;
    }

    .form-row {
      display: grid;
      gap: 1rem;
    }

    @media (min-width: 640px) {
      .form-row {
        grid-template-columns: 1fr 1fr;
      }
    }

    .input-group {
      position: relative;
    }

    .input-group label {
      display: block;
      font-size: 0.875rem;
      font-weight: 500;
      color: #57534e;
      margin-bottom: 0.375rem;
    }

    .input-wrapper {
      position: relative;
    }

    .input-wrapper input {
      width: 100%;
      padding: 0.625rem 2.5rem 0.625rem 1rem;
      background: white;
      border: 1px solid #e7e5e4;
      border-radius: 0.75rem;
      color: #292524;
      font-size: 1rem;
      transition: all 0.2s ease;
    }

    .input-wrapper input::placeholder {
      color: #a8a29e;
    }

    .input-wrapper input:focus {
      outline: none;
      box-shadow: 0 0 0 2px #fde68a;
      border-color: #fcd34d;
    }

    .clear-btn {
      position: absolute;
      right: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #a8a29e;
      cursor: pointer;
      padding: 0;
      display: none;
      transition: color 0.2s ease;
    }

    .clear-btn:hover {
      color: #57534e;
    }

    .clear-btn.visible {
      display: block;
    }

    .preview-card {
      overflow: hidden;
      padding: 0;
    }

    .preview-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem 1.5rem;
      border-bottom: 1px solid #f5f5f4;
    }

    .preview-header span {
      font-size: 0.875rem;
      font-weight: 500;
      color: #57534e;
    }

    .toggle-btn {
      position: relative;
      width: 3.5rem;
      height: 1.75rem;
      border-radius: 9999px;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s ease;
      background-color: #fde68a;
    }

    .toggle-btn.dark {
      background-color: #44403c;
    }

    .toggle-knob {
      position: absolute;
      top: 0.25rem;
      left: 0.25rem;
      width: 1.25rem;
      height: 1.25rem;
      border-radius: 9999px;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .toggle-btn.dark .toggle-knob {
      left: 2rem;
      background: #1c1917;
    }

    .preview-content {
      padding: 2rem;
      transition: background-color 0.2s ease;
    }

    .preview-content.dark {
      background-color: #1c1917;
    }

    .signature-preview {
      font-size: 0.875rem;
      line-height: 1.625;
    }

    .signature-name {
      font-weight: 600;
      font-size: 1rem;
      color: #1c1917;
    }

    .preview-content.dark .signature-name {
      color: white;
    }

    .signature-text {
      color: #78716c;
    }

    .preview-content.dark .signature-text {
      color: #a8a29e;
    }

    .signature-contact {
      margin-top: 0.25rem;
    }

    .signature-logo {
      margin-top: 0.75rem;
    }

    .signature-logo img {
      height: 2.5rem;
      object-fit: contain;
    }

    .actions {
      display: flex;
      gap: 0.75rem;
    }

    .btn-primary {
      flex: 1;
      background: #292524;
      color: white;
      font-weight: 500;
      padding: 0.75rem 1.5rem;
      border-radius: 0.75rem;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: background-color 0.2s ease;
    }

    .btn-primary:hover {
      background: #1c1917;
    }

    .btn-secondary {
      background: white;
      color: #44403c;
      font-weight: 500;
      padding: 0.75rem 1.5rem;
      border-radius: 0.75rem;
      border: 1px solid #e7e5e4;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .btn-secondary:hover {
      background: #fafaf9;
    }

    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      z-index: 50;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .modal-overlay.visible {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: white;
      border-radius: 1rem;
      max-width: 32rem;
      width: 100%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1.5rem;
      border-bottom: 1px solid #f5f5f4;
    }

    .modal-header h2 {
      font-size: 1.125rem;
      font-weight: 600;
      color: #292524;
    }

    .modal-close {
      background: none;
      border: none;
      color: #a8a29e;
      cursor: pointer;
      padding: 0;
      transition: color 0.2s ease;
    }

    .modal-close:hover {
      color: #57534e;
    }

    .modal-body {
      padding: 1.5rem;
    }

    .instruction-section {
      margin-bottom: 1.5rem;
    }

    .instruction-section:last-child {
      margin-bottom: 0;
    }

    .instruction-title {
      font-weight: 600;
      color: #292524;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .instruction-icon {
      width: 1.5rem;
      height: 1.5rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
    }

    .instruction-icon.gmail {
      background: #fee2e2;
      color: #dc2626;
    }

    .instruction-icon.macos {
      background: #dbeafe;
      color: #2563eb;
    }

    .instruction-icon.ios {
      background: #f5f5f4;
      color: #57534e;
    }

    .instruction-list {
      font-size: 0.875rem;
      color: #57534e;
      margin-left: 2rem;
      padding-left: 0;
    }

    .instruction-list li {
      margin-bottom: 0.25rem;
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>
  <div class="container" id="app">
    <div class="header">
      <h1>Generador de Firma de Michelen Arquitectos</h1>
      <p>Crea una firma profesional en segundos</p>
    </div>

    <div class="card">
      <div class="form-grid">
        <div class="form-row">
          <div class="input-group">
            <label for="name">Nombre</label>
            <div class="input-wrapper">
              <input type="text" id="name" placeholder="María García">
              <button type="button" class="clear-btn" data-field="name">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
          <div class="input-group">
            <label for="title">Cargo</label>
            <div class="input-wrapper">
              <input type="text" id="title" placeholder="Diseñadora de Producto">
              <button type="button" class="clear-btn" data-field="title">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="input-group">
            <label for="company">Empresa</label>
            <div class="input-wrapper">
              <input type="text" id="company" placeholder="Michellen S.A.">
              <button type="button" class="clear-btn" data-field="company">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
          <div class="input-group">
            <label for="phone">Teléfono</label>
            <div class="input-wrapper">
              <input type="tel" id="phone" placeholder="+1 (809) 123-4567">
              <button type="button" class="clear-btn" data-field="phone">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="input-group">
            <label for="twitter">Twitter / X</label>
            <div class="input-wrapper">
              <input type="text" id="twitter" placeholder="mariag">
              <button type="button" class="clear-btn" data-field="twitter">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
          <div class="input-group">
            <label for="website">Sitio Web</label>
            <div class="input-wrapper">
              <input type="url" id="website" placeholder="https://michellen.com">
              <button type="button" class="clear-btn" data-field="website">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div class="card preview-card">
      <div class="preview-header">
        <span>Vista previa</span>
        <button type="button" class="toggle-btn" id="theme-toggle">
          <span class="toggle-knob" id="toggle-knob">
            <svg id="sun-icon" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#d97706" stroke-width="2">
              <circle cx="12" cy="12" r="5"></circle>
              <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>
            </svg>
            <svg id="moon-icon" class="hidden" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </span>
        </button>
      </div>
      <div class="preview-content" id="preview-content">
        <div class="signature-preview">
          <div class="signature-name" id="preview-name"></div>
          <div class="signature-text" id="preview-title"></div>
          <div class="signature-text" id="preview-company"></div>
          <div class="signature-text signature-contact" id="preview-contact"></div>
          <div class="signature-text" id="preview-website"></div>
          <div class="signature-logo" id="preview-logo-container">
            <img id="preview-logo" src="" alt="Logo">
          </div>
        </div>
      </div>
    </div>

    <div class="actions">
      <button type="button" class="btn-primary" id="copy-btn">
        <svg id="copy-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>
        <svg id="check-icon" class="hidden" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        <span id="copy-text">Copiar Firma</span>
      </button>
      <button type="button" class="btn-secondary" id="help-btn">¿Cómo importar?</button>
    </div>

  </div>

  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="modal">
      <div class="modal-header">
        <h2>Cómo Importar Tu Firma</h2>
        <button type="button" class="modal-close" id="modal-close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="instruction-section">
          <h3 class="instruction-title">
            <span class="instruction-icon gmail">G</span>
            Gmail
          </h3>
          <ol class="instruction-list">
            <li>Abre Gmail y haz clic en el ícono de engranaje → Ver todos los ajustes</li>
            <li>Desplázate hasta "Firma" y haz clic en "Crear nueva"</li>
            <li>Pega tu firma copiada en el editor</li>
            <li>Haz clic en "Guardar cambios" en la parte inferior</li>
          </ol>
        </div>
        <div class="instruction-section">
          <h3 class="instruction-title">
            <span class="instruction-icon macos">⌘</span>
            macOS Mail
          </h3>
          <ol class="instruction-list">
            <li>Abre Mail → Configuración → Firmas</li>
            <li>Selecciona tu cuenta y haz clic en "+" para agregar una firma</li>
            <li>Pega tu firma copiada</li>
            <li>Asígnala a tu cuenta desde el menú desplegable</li>
          </ol>
        </div>
        <div class="instruction-section">
          <h3 class="instruction-title">
            <span class="instruction-icon ios">✉</span>
            iOS Mail
          </h3>
          <ol class="instruction-list">
            <li>Ve a Ajustes → Mail → Firma</li>
            <li>Selecciona "Por cuenta" si tienes varias cuentas</li>
            <li>Pega tu firma (el formato puede ser limitado)</li>
            <li>Para soporte HTML completo, configúrala primero en escritorio</li>
          </ol>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Base URL for the hosted site (used for logo URLs in copied signatures)
    const BASE_URL = 'https://firma.michelenarquitectos.com/';

    // Default logo filenames
    const DEFAULT_LOGO_LIGHT = 'Michelen Arquitectos Logo.png';
    const DEFAULT_LOGO_DARK = 'Michelen Arquitectos Logo Dark.png';

    const defaults = {
      name: 'Eric Y Michelen',
      title: 'Principal and Partner',
      company: 'Michelen Arquitectos',
      phone: '+1 (829) 273-8445',
      website: 'www.michelenarquitectos.com'
    };

    // State
    const state = {
      name: '',
      title: '',
      company: '',
      phone: '',
      twitter: '',
      website: '',
      darkPreview: false
    };

    // DOM Elements
    const elements = {
      app: document.getElementById('app'),
      inputs: {
        name: document.getElementById('name'),
        title: document.getElementById('title'),
        company: document.getElementById('company'),
        phone: document.getElementById('phone'),
        twitter: document.getElementById('twitter'),
        website: document.getElementById('website')
      },
      clearBtns: document.querySelectorAll('.clear-btn'),
      preview: {
        content: document.getElementById('preview-content'),
        name: document.getElementById('preview-name'),
        title: document.getElementById('preview-title'),
        company: document.getElementById('preview-company'),
        contact: document.getElementById('preview-contact'),
        website: document.getElementById('preview-website'),
        logoContainer: document.getElementById('preview-logo-container'),
        logo: document.getElementById('preview-logo')
      },
      themeToggle: document.getElementById('theme-toggle'),
      toggleKnob: document.getElementById('toggle-knob'),
      sunIcon: document.getElementById('sun-icon'),
      moonIcon: document.getElementById('moon-icon'),
      copyBtn: document.getElementById('copy-btn'),
      copyIcon: document.getElementById('copy-icon'),
      checkIcon: document.getElementById('check-icon'),
      copyText: document.getElementById('copy-text'),
      helpBtn: document.getElementById('help-btn'),
      modalOverlay: document.getElementById('modal-overlay'),
      modal: document.getElementById('modal'),
      modalClose: document.getElementById('modal-close')
    };

    // Utility functions
    function getValue(field) {
      return state[field] || defaults[field] || '';
    }

    function updateClearButtonVisibility(field) {
      const btn = document.querySelector(`.clear-btn[data-field="${field}"]`);
      if (btn) {
        btn.classList.toggle('visible', state[field].length > 0);
      }
    }


    function updatePreview() {
      const currentLogo = state.darkPreview ? DEFAULT_LOGO_DARK : DEFAULT_LOGO_LIGHT;

      elements.preview.name.textContent = getValue('name');
      elements.preview.title.textContent = getValue('title');
      elements.preview.company.textContent = getValue('company');
      elements.preview.website.textContent = getValue('website');

      // Build contact line
      const contactParts = [];
      const phone = getValue('phone');
      if (phone) contactParts.push(phone);
      if (state.twitter) contactParts.push('@' + state.twitter.replace('@', ''));
      elements.preview.contact.textContent = contactParts.join(' • ');
      elements.preview.contact.style.display = contactParts.length > 0 ? 'block' : 'none';

      // Logo
      if (currentLogo) {
        elements.preview.logoContainer.style.display = 'block';
        elements.preview.logo.src = currentLogo;
        elements.preview.logo.onerror = function() {
          this.style.display = 'none';
        };
      } else {
        elements.preview.logoContainer.style.display = 'none';
      }

      // Theme
      elements.preview.content.classList.toggle('dark', state.darkPreview);
      elements.themeToggle.classList.toggle('dark', state.darkPreview);
      elements.sunIcon.classList.toggle('hidden', state.darkPreview);
      elements.moonIcon.classList.toggle('hidden', !state.darkPreview);
    }

    function generateSignatureHTML() {
      const phone = getValue('phone');
      const twitter = state.twitter;
      const title = getValue('title');
      const company = getValue('company');
      const website = getValue('website');
      const websiteHref = website.startsWith('http') ? website : 'https://' + website;
      const logoFilename = state.darkPreview ? DEFAULT_LOGO_DARK : DEFAULT_LOGO_LIGHT;
      // Use full URL for the logo so it works when pasted in email clients
      const currentLogo = BASE_URL + encodeURIComponent(logoFilename);

      const contactParts = [];
      if (phone) contactParts.push('<a href="tel:' + phone.replace(/\s/g, '') + '" style="color: #6b6b6b; text-decoration: none;">' + phone + '</a>');
      if (twitter) contactParts.push('@' + twitter.replace('@', ''));
      const contactLine = contactParts.join(' • ');

      let html = `<table cellpadding="0" cellspacing="0" border="0" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; line-height: 1.4;">
  <tr>
    <td style="font-weight: 600; color: #1a1a1a; font-size: 15px;">${getValue('name')}</td>
  </tr>
  <tr>
    <td style="color: #6b6b6b; padding-top: 2px;">${title}</td>
  </tr>
  <tr>
    <td style="color: #6b6b6b; padding-top: 2px;">${company}</td>
  </tr>`;

      if (contactLine) {
        html += `
  <tr>
    <td style="color: #6b6b6b; padding-top: 4px;">${contactLine}</td>
  </tr>`;
      }

      html += `
  <tr>
    <td style="padding-top: 4px;"><a href="${websiteHref}" target="_blank" style="color: #6b6b6b; text-decoration: none;">${website}</a></td>
  </tr>`;

      if (currentLogo) {
        html += `
  <tr>
    <td style="padding-top: 12px;">
      <a href="${websiteHref}" target="_blank" style="text-decoration: none;">
        <img src="${currentLogo}" alt="Logo" height="40" style="display: block; border: 0;" />
      </a>
    </td>
  </tr>`;
      }

      html += `
</table>`;

      return html;
    }

    async function copySignature() {
      const html = generateSignatureHTML();
      try {
        await navigator.clipboard.write([
          new ClipboardItem({
            'text/html': new Blob([html], { type: 'text/html' }),
            'text/plain': new Blob([html], { type: 'text/plain' })
          })
        ]);
        showCopiedFeedback();
      } catch (e) {
        try {
          await navigator.clipboard.writeText(html);
          showCopiedFeedback();
        } catch (e2) {
          console.error('Failed to copy:', e2);
        }
      }
    }

    function showCopiedFeedback() {
      elements.copyIcon.classList.add('hidden');
      elements.checkIcon.classList.remove('hidden');
      elements.copyText.textContent = '¡Copiado!';
      setTimeout(() => {
        elements.copyIcon.classList.remove('hidden');
        elements.checkIcon.classList.add('hidden');
        elements.copyText.textContent = 'Copiar Firma';
      }, 2000);
    }


    function openModal() {
      elements.modalOverlay.classList.add('visible');
    }

    function closeModal() {
      elements.modalOverlay.classList.remove('visible');
    }

    // Event listeners
    Object.keys(elements.inputs).forEach(field => {
      elements.inputs[field].addEventListener('input', function(e) {
        state[field] = e.target.value;
        updateClearButtonVisibility(field);
        updatePreview();
      });
    });

    elements.clearBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        const field = this.dataset.field;
        state[field] = '';
        elements.inputs[field].value = '';
        updateClearButtonVisibility(field);
        updatePreview();
      });
    });


    elements.themeToggle.addEventListener('click', function() {
      state.darkPreview = !state.darkPreview;
      updatePreview();
    });

    elements.copyBtn.addEventListener('click', copySignature);
    elements.helpBtn.addEventListener('click', openModal);
    elements.modalClose.addEventListener('click', closeModal);
    elements.modalOverlay.addEventListener('click', function(e) {
      if (e.target === elements.modalOverlay) {
        closeModal();
      }
    });

    // Prevent modal close when clicking inside modal
    elements.modal.addEventListener('click', function(e) {
      e.stopPropagation();
    });

    // Initialize
    function init() {
      updatePreview();

      // Trigger fade-in animation
      setTimeout(() => {
        elements.app.classList.add('loaded');
      }, 50);
    }

    init();
  </script>
</body>
</html>
